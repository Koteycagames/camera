<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞–º–µ—Ä–∞ —Å –∑—É–º–æ–º ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    body {
      margin: 0;
      background: black;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: white;
      font-family: sans-serif;
      overflow: hidden;
    }

    .camera-container {
      position: relative;
      width: 90vw;
      max-width: 420px;
      aspect-ratio: 3 / 4;
      overflow: hidden;
      border-radius: 12px;
      border: 2px solid #555;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(var(--zoom, 1));
      transform-origin: center center;
      transition: transform 0.08s linear;
      background: black;
    }

    /* REC */
    .rec-indicator {
      position: absolute;
      top: 10px;
      right: 12px;
      font-size: 14px;
      font-weight: bold;
      color: red;
      display: none;
      align-items: center;
      gap: 8px;
      z-index: 5;
      padding: 4px 8px;
      border-radius: 6px;
      background: rgba(0,0,0,0.45);
    }

    .rec-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: red;
      animation: recBlink 1s infinite;
    }

    @keyframes recBlink {
      0%, 50% { opacity: 1; transform: scale(1); }
      51%, 100% { opacity: 0.25; transform: scale(0.9); }
    }

    .rec-time {
      font-size: 13px;
      color: white;
    }

    #controls {
      width: 90vw;
      max-width: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 12px;
      gap: 10px;
    }

    .zoom-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      gap: 8px;
    }

    button.icon {
      background: #fff;
      color: black;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    button.primary {
      background: #00bcd4;
      color: white;
      border-radius: 50px;
      width: auto;
      padding: 10px 18px;
      font-size: 14px;
      border: none;
      cursor: pointer;
    }

    .action-buttons {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    input[type="range"] {
      width: 100%;
      accent-color: #00bcd4;
      background: transparent;
    }

    #zoomValue {
      font-size: 15px;
      font-weight: 700;
      margin-top: 4px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0, 0, 0, 0.7);
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: #222;
      padding: 18px;
      border-radius: 10px;
      width: 94%;
      max-width: 360px;
      text-align: center;
      position: relative;
      color: white;
    }

    .modal-content input, .modal-content select {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
      box-sizing: border-box;
    }

    .modal-content button {
      margin-top: 12px;
      width: 100%;
      padding: 10px;
      font-size: 15px;
      background-color: #00bcd4;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .close-modal {
      position: absolute;
      top: 12px;
      right: 14px;
      font-size: 20px;
      color: white;
      cursor: pointer;
    }

    .zuy-mode { background: linear-gradient(45deg, black, darkred); }
  </style>
</head>
<body>
  <div class="camera-container" id="cameraContainer">
    <video id="camera" autoplay playsinline muted></video>
    <div class="rec-indicator" id="recIndicator">
      <div class="rec-dot"></div>
      <div style="display:flex;gap:8px;align-items:center;">
        <div style="font-weight:700">REC</div>
        <div class="rec-time" id="recTime">00:00</div>
      </div>
    </div>
  </div>

  <div id="controls">
    <div class="zoom-controls">
      <button class="icon" id="zoomOut">‚àí</button>
      <input type="range" id="zoom" min="1" max="50" value="1" step="0.1">
      <button class="icon" id="zoomIn">+</button>
    </div>

    <div id="zoomValue">–ó—É–º: 1.0√ó</div>

    <div class="action-buttons">
      <button class="primary" id="settingsBtn">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      <button class="primary" id="capture">üì∑ –§–æ—Ç–æ</button>
      <button class="primary" id="recordBtn">‚è∫ –í–∏–¥–µ–æ</button>
      <button class="primary" id="planBtn">–ü–ª–∞–Ω</button>
    </div>

    <canvas id="canvas" style="display:none;"></canvas>
  </div>

  <!-- –ü–ª–∞–Ω -->
  <div id="planModal" class="modal">
    <div class="modal-content">
      <div class="close-modal" id="closePlanModal">&times;</div>
      <h3>–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–Ω–∞</h3>
      <input id="activationKey" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á (def|min|nevrotik|zuy)">
      <button id="activateBtn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
  </div>

  <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="close-modal" id="closeSettings">&times;</div>
      <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã</h3>

      <label for="qualitySelect" style="display:block;text-align:left;margin-top:6px;">–ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ:</label>
      <select id="qualitySelect">
        <option value="144">144p</option>
        <option value="240">240p</option>
        <option value="480">480p</option>
        <option value="720">720p</option>
        <option value="1080" selected>1080p</option>
        <option value="2160" data-plan="nevrotik">4K (—Ç—Ä–µ–±—É–µ—Ç—Å—è nevrotik)</option>
        <option value="4320" data-plan="zuy">8K (—Ç—Ä–µ–±—É–µ—Ç—Å—è zuy)</option>
      </select>

      <label for="fpsSelect" style="display:block;text-align:left;margin-top:8px;">FPS:</label>
      <select id="fpsSelect"></select>

      <button id="applyQuality">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </div>
  </div>

  <script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const video = document.getElementById('camera');
    const zoom = document.getElementById('zoom');
    const zoomValue = document.getElementById('zoomValue');
    const zoomIn = document.getElementById('zoomIn');
    const zoomOut = document.getElementById('zoomOut');
    const canvas = document.getElementById('canvas');
    const capture = document.getElementById('capture');
    const recordBtn = document.getElementById('recordBtn');

    const planBtn = document.getElementById('planBtn');
    const planModal = document.getElementById('planModal');
    const closePlanModal = document.getElementById('closePlanModal');
    const activateBtn = document.getElementById('activateBtn');
    const activationKey = document.getElementById('activationKey');

    const settingsBtn = document.getElementById('settingsBtn');
    const settingsModal = document.getElementById('settingsModal');
    const closeSettings = document.getElementById('closeSettings');
    const qualitySelect = document.getElementById('qualitySelect');
    const fpsSelect = document.getElementById('fpsSelect');
    const applyQuality = document.getElementById('applyQuality');

    const recIndicator = document.getElementById('recIndicator');
    const recTimeEl = document.getElementById('recTime');

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    let currentPlan = 'def';
    let currentStream = null;
    let currentQuality = 1080;
    let currentFPS = 60;
    let mediaRecorder = null;
    let chunks = [];
    let recording = false;
    let recTimer = null;
    let recSeconds = 0;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS (–∫–∞–º–µ—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ plain http)
    if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
      console.warn('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –≤ HTTPS ‚Äî –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—Ä–µ—â—ë–Ω –±—Ä–∞—É–∑–µ—Ä–æ–º.');
      // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º)
      alert('‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–∞–º–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞ —á–µ—Ä–µ–∑ HTTPS –∏–ª–∏ localhost.');
    }

    // ------ FPS options –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–∞–Ω–∞ ------
    function updateFpsOptions() {
      fpsSelect.innerHTML = '';
      let maxFps = 60;
      if (currentPlan === 'min') maxFps = 120;
      else if (currentPlan === 'nevrotik') maxFps = 240;
      else if (currentPlan === 'zuy') maxFps = 480;

      const candidates = [30, 60, 120, 240, 480];
      candidates.filter(v => v <= maxFps).forEach(v => {
        const opt = document.createElement('option');
        opt.value = v;
        opt.textContent = v + ' FPS';
        if (v === currentFPS) opt.selected = true;
        fpsSelect.appendChild(opt);
      });

      // –µ—Å–ª–∏ —Ç–µ–∫—É—â–∏–π FPS > max, –ø–æ–Ω–∏–∑–∏–º
      if (currentFPS > maxFps) {
        currentFPS = maxFps;
      }
    }

    // ------ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã ------
    async function initCamera(resolution = 1080, fps = 60) {
      try {
        // –æ—Å—Ç–∞–Ω–æ–≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞
        if (currentStream) {
          currentStream.getTracks().forEach(t => t.stop());
        }

        // –≤—ã—á–∏—Å–ª—è–µ–º –∂–µ–ª–∞–µ–º—ã–µ width/height
        const idealHeight = parseInt(resolution, 10) || 1080;
        const idealWidth = Math.round(idealHeight * 16 / 9);

        const constraints = {
          audio: true,
          video: {
            facingMode: 'environment',
            width: { ideal: idealWidth },
            height: { ideal: idealHeight },
            frameRate: { ideal: fps }
          }
        };

        const stream = await navigator.mediaDevices.getUserMedia(constraints);
        currentStream = stream;
        video.srcObject = stream;

        // –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å play()
        try { await video.play(); } catch (e) { console.warn('video.play() failed:', e); }

        // –µ—Å–ª–∏ –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –º–æ–∂–Ω–æ –∏—Ö –ø—Ä–æ—á–µ—Å—Ç—å (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
        const track = stream.getVideoTracks()[0];
        const settings = track.getSettings ? track.getSettings() : {};
        console.log('Camera stream settings:', settings);

      } catch (err) {
        console.error('initCamera error:', err);
        // –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        if (err.name === 'NotAllowedError' || err.name === 'SecurityError') {
          alert('–û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.');
        } else {
          alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–µ—Ä—É: ' + (err.message || err.name));
        }
      }
    }

    // ------ –ó—É–º ------
    function updateZoom() {
      const z = parseFloat(zoom.value);
      video.style.setProperty('--zoom', z);
      zoomValue.textContent = `–ó—É–º: ${z.toFixed(1)}√ó`;
    }

    zoom.addEventListener('input', updateZoom);
    zoomIn.addEventListener('click', () => {
      let newZ = Math.min(parseFloat(zoom.max), parseFloat(zoom.value) + 0.1);
      zoom.value = newZ.toFixed(1);
      updateZoom();
    });
    zoomOut.addEventListener('click', () => {
      let newZ = Math.max(1, parseFloat(zoom.value) - 0.1);
      zoom.value = newZ.toFixed(1);
      updateZoom();
    });

    // ------ –§–æ—Ç–æ ------
    capture.addEventListener('click', () => {
      if (!currentStream) return alert('–ö–∞–º–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞.');
      const vw = video.videoWidth || (currentQuality * 16 / 9);
      const vh = video.videoHeight || currentQuality;
      canvas.width = vw;
      canvas.height = vh;
      const ctx = canvas.getContext('2d');

      // –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—ë–Ω –∑—É–º —á–µ—Ä–µ–∑ css, –Ω—É–∂–Ω–æ —Ä–∏—Å–æ–≤–∞—Ç—å —Å —É—á—ë—Ç–æ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏:
      // –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: drawImage(video, 0,0,w,h) ‚Äî —ç—Ç–æ —Å–Ω–∏–º–æ–∫ —Ç–æ–≥–æ, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç.
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const link = document.createElement('a');
      link.download = `photo_${vw}x${vh}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    // ------ –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ (MediaRecorder) ------
    function getSupportedMime() {
      const types = [
        'video/webm;codecs=vp9',
        'video/webm;codecs=vp8',
        'video/webm',
        'video/mp4' // —Ä–µ–¥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è by MediaRecorder
      ];
      for (const t of types) {
        try {
          if (MediaRecorder.isTypeSupported && MediaRecorder.isTypeSupported(t)) return t;
        } catch (e) { /* ignore */ }
      }
      return '';
    }

    function startRecTimer() {
      recSeconds = 0;
      recTimeEl.textContent = '00:00';
      recTimer = setInterval(() => {
        recSeconds++;
        const mm = String(Math.floor(recSeconds / 60)).padStart(2,'0');
        const ss = String(recSeconds % 60).padStart(2,'0');
        recTimeEl.textContent = `${mm}:${ss}`;
      }, 1000);
    }
    function stopRecTimer() {
      clearInterval(recTimer);
      recTimer = null;
      recTimeEl.textContent = '00:00';
    }

    recordBtn.addEventListener('click', () => {
      if (!currentStream) return alert('–ö–∞–º–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞.');

      if (!recording) {
        chunks = [];
        const mime = getSupportedMime() || undefined;
        try {
          mediaRecorder = mime ? new MediaRecorder(currentStream, { mimeType: mime }) : new MediaRecorder(currentStream);
        } catch (e) {
          console.error('MediaRecorder ctor failed:', e);
          alert('–ó–∞–ø–∏—Å—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (MediaRecorder).');
          return;
        }

        mediaRecorder.ondataavailable = (ev) => {
          if (ev.data && ev.data.size) chunks.push(ev.data);
        };
        mediaRecorder.onstop = () => {
          const blob = new Blob(chunks, { type: chunks[0]?.type || 'video/webm' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `video_${currentFPS}fps_${currentQuality}p.webm`;
          a.click();
          setTimeout(() => URL.revokeObjectURL(url), 2000);
        };

        mediaRecorder.start();
        recording = true;
        recordBtn.textContent = '‚èπ –°—Ç–æ–ø';
        recordBtn.style.background = '#e53935';
        recIndicator.style.display = 'flex';
        startRecTimer();
      } else {
        mediaRecorder.stop();
        recording = false;
        recordBtn.textContent = '‚è∫ –í–∏–¥–µ–æ';
        recordBtn.style.background = '#00bcd4';
        recIndicator.style.display = 'none';
        stopRecTimer();
      }
    });

    // ------ –ü–ª–∞–Ω—ã ------
    planBtn.addEventListener('click', () => planModal.style.display = 'flex');
    closePlanModal.addEventListener('click', () => planModal.style.display = 'none');

    activateBtn.addEventListener('click', () => {
      const key = activationKey.value.trim().toLowerCase();
      if (!key) return alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á (def|min|nevrotik|zuy)');
      if (key === 'def') {
        currentPlan = 'def'; zoom.max = 50;
        alert('–ü–ª–∞–Ω def –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (50√ó max).');
        document.body.classList.remove('zuy-mode');
      } else if (key === 'min') {
        currentPlan = 'min'; zoom.max = 100;
        alert('–ü–ª–∞–Ω min –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (100√ó max).');
        document.body.classList.remove('zuy-mode');
      } else if (key === 'nevrotik') {
        currentPlan = 'nevrotik'; zoom.max = 500;
        alert('–ü–ª–∞–Ω nevrotik –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (500√ó max).');
        document.body.classList.remove('zuy-mode');
      } else if (key === 'zuy') {
        currentPlan = 'zuy'; zoom.max = 1000;
        alert('–ü–ª–∞–Ω zuy –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (1000√ó max).');
        document.body.classList.add('zuy-mode');
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á.');
        return;
      }
      zoom.value = 1;
      updateZoom();
      planModal.style.display = 'none';
      activationKey.value = '';
      updateFpsAfterPlan();
    });

    function updateFpsAfterPlan() {
      // —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –æ–ø—Ü–∏–∏ FPS –∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –ø–æ–Ω–∏–∑–∏—Ç—å —Ç–µ–∫—É—â–∏–π fps
      updateFpsOptions();
    }

    // ------ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ------
    settingsBtn.addEventListener('click', () => {
      updateFpsOptions();
      settingsModal.style.display = 'flex';
    });
    closeSettings.addEventListener('click', () => settingsModal.style.display = 'none');

    applyQuality.addEventListener('click', async () => {
      const val = parseInt(qualitySelect.value, 10);
      const option = qualitySelect.selectedOptions[0];
      const requiredPlan = option?.dataset?.plan;
      if (requiredPlan && requiredPlan !== currentPlan) {
        alert(`–î–ª—è —ç—Ç–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞–Ω "${requiredPlan}"`);
        return;
      }
      currentQuality = val;
      currentFPS = parseInt(fpsSelect.value, 10) || currentFPS;
      alert(`–ü—Ä–∏–º–µ–Ω–µ–Ω–æ: ${currentQuality}p, ${currentFPS} FPS`);
      await initCamera(currentQuality, currentFPS);
      settingsModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
      if (e.target === planModal) planModal.style.display = 'none';
      if (e.target === settingsModal) settingsModal.style.display = 'none';
    });

    function updateFpsOptions() {
      fpsSelect.innerHTML = '';
      let maxFps = 60;
      if (currentPlan === 'min') maxFps = 120;
      else if (currentPlan === 'nevrotik') maxFps = 240;
      else if (currentPlan === 'zuy') maxFps = 480;

      const candidates = [30, 60, 120, 240, 480];
      candidates.filter(v => v <= maxFps).forEach(v => {
        const opt = document.createElement('option');
        opt.value = v;
        opt.textContent = v + ' FPS';
        if (v === currentFPS) opt.selected = true;
        fpsSelect.appendChild(opt);
      });

      if (currentFPS > maxFps) {
        currentFPS = maxFps;
      }
    }

    // —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã
    (async function start() {
      updateFpsOptions();
      try {
        await initCamera(currentQuality, currentFPS);
        updateZoom();
      } catch (e) {
        console.error('start error', e);
      }
    })();

    // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–æ—Ç–æ–∫ "—á—ë—Ä–Ω—ã–π" ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    // (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏)
    video.addEventListener('error', (ev) => {
      console.error('Video element error:', ev);
    });
  </script>
</body>
</html>
